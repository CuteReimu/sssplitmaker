<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
    <link rel="stylesheet" href="http://127.0.0.1:12333/x/static/index.css" />
    <script src="http://127.0.0.1:12333/x/static/vue.global.prod.js"></script>
    <script src="http://127.0.0.1:12333/x/static/index.full.min.js"></script>
    <script src="http://127.0.0.1:12333/x/static/index.iife.min.js"></script>
</head>

<body>
<div id="app">
    <el-table :data="tableData">
        <el-table-column label="节点名称">
            <template #default="scope">
                <el-input v-model="scope.row.name" filterable placeholder="节点名称" style="width: 300px"></el-input>
            </template>
        </el-table-column>
        <el-table-column label="触发事件">
            <template #default="scope">
                <el-select v-model="scope.row.event" filterable placeholder="触发事件" style="width: 300px">
                    <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value"></el-option>
                </el-select>
            </template>
        </el-table-column>
        <el-table-column label="操作">
            <template #default="scope">
                <el-button :icon="Plus" circle @click="addLine(scope.$index)"></el-button>
                <el-button :icon="Minus" circle @click="removeLine(scope.$index)"></el-button>
                <el-button :icon="Top" circle></el-button>
                <el-button :icon="Bottom" circle></el-button>
            </template>
        </el-table-column>
    </el-table>
</div>

<script>
    const options = {{.options}};
    const { createApp } = Vue;
    const app = createApp({
        data() {
            return {
                options: {{.options}},
                tableData: [
                    {
                        name: '开始新游戏',
                        event: 'StartNewGame',
                    },
                    {
                        name: '任意结束',
                        event: 'EndingSplit',
                    },
                ],
            };
        },
        setup() {
            return {
                Plus,
                Minus,
                Top,
                Bottom,
            };
        },
        methods: {
            addLine(index) {
                this.tableData.splice(index, 0,
                    {
                        name: '手动分割',
                        event: 'ManualSplit',
                    },
                );
            },
            removeLine(index) {
                if (this.tableData.length <= 1) {
                    return;
                }
                this.tableData.splice(index, 1);
            },
        },
    });
    // 导入需要的图标
    const { Plus, Minus, Top, Bottom } = ElementPlusIconsVue;
    app.use(ElementPlus);
    app.mount('#app');
</script>
</body>
</html>